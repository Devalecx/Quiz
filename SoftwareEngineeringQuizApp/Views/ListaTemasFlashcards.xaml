<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:SoftwareEngineeringQuizApp.ViewModels"
             x:Class="SoftwareEngineeringQuizApp.Views.ListaTemasFlashcardsPage"
             Title="Estudiar Flashcards"
             BackgroundColor="#F0F2F5">

    <ContentPage.Behaviors>
        <Toolkit:EventToCommandBehavior xmlns:Toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
                                        EventName="Appearing"
                                        Command="{Binding CargarTemasCommand}" />
    </ContentPage.Behaviors>

    <Grid RowDefinitions="Auto, *">
        <Label Text="Elige un tema para repasar" 
               TextColor="Gray" 
               HorizontalOptions="Center" 
               Margin="0,20,0,10"/>

        <CollectionView Grid.Row="1" 
                        ItemsSource="{Binding Temas}" 
                        Margin="20">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical" ItemSpacing="15"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="12" HasShadow="True" BorderColor="Transparent" Padding="25" BackgroundColor="White">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:ListaTemasFlashcardsViewModel}}, Path=SeleccionarTemaCommand}"
                                                  CommandParameter="{Binding .}"/>
                        </Frame.GestureRecognizers>

                        <HorizontalStackLayout Spacing="15">
                            <Label Text="ðŸ“‡" FontSize="24" VerticalOptions="Center"/>
                            <Label Text="{Binding .}" FontSize="18" FontAttributes="Bold" TextColor="#333" VerticalOptions="Center"/>
                        </HorizontalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </Grid>
</ContentPage>